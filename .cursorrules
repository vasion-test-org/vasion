# Vasion Project AI Rules

This project uses **Tailwind CSS v4** (migrating from styled-components). Follow these rules for ALL code changes.

---

## When converting or creating components (do this first)

**For every request about converting or creating components:** Follow the **Component Conversion Playbook** in order. Do not skip steps.

1. **Playbook (single source of truth):** `.cursor/rules/component-conversion-playbook.mdc`
2. **Example component to copy patterns from:** `components/LogoCube.js`
3. **Detailed examples and ADA/SEO:** `.cursor/rules/tailwind-migration.mdc`
4. **Token lookup (colors, typography, spacing):** `.cursor/rules/design-tokens.mdc`

The playbook contains: Figma ask, container/props analysis, element-by-element conversion, mobile-first breakpoints, VW→Tailwind formula, `cn()`/theme handling, client extraction, and validation. Use it for every conversion.

---

## Critical Rules (all code changes)

1. **Converting/creating components** → Follow the playbook above first.
2. **PRESERVE EXACT STRUCTURE & BEHAVIOR** — Never add/remove containers; never simplify breakpoint logic.
3. **ALWAYS use Tailwind CSS** — No styled-components in new code.
4. **NO arbitrary values** — No `w-[450px]`; use design tokens (see `app/globals.css` and `.cursor/rules/design-tokens.mdc`).
5. **ADA** — Alt text, focus states (`focus:ring-2 focus:ring-purple-border focus:ring-offset-2`), semantic HTML.
6. **`cn()` only for conditionals; `tw` for static/breakpoint classes** — Use `cn()` when classes depend on props/theme (e.g. `theme === 'dark' ? 'bg-purple-dark' : 'bg-purple'`). Use `className={tw`...`}` when classes are static or only vary by breakpoint. Pattern: `tw`base md:(what changes) lg:(what changes) xl:(what changes)` so values cascade naturally.

## Quick reference (details in playbook + rule files)

- **Tailwind v4:** Tokens in `app/globals.css` via `@theme`; custom gradients via `@utility` in globals.css. No `tailwind.config.js` for theme.
- **Breakpoints (mobile-first):** base = mobile (0–480px) | `md:` = 481px+ | `lg:` = 1025px+ | `xl:` = 1601px+. Styled-components: `${media.mobile}` → base, `${media.tablet}` → `md:`, desktop base → `lg:`, `${media.fullWidth}` → `xl:`.
- **VW → Tailwind:** `px = vw × (viewport/100)` (mobile 480, tablet 1024, desktop 1600); `Tailwind number = px / 4`. Same px at all breakpoints → one class; different → base + `md:`/`lg:`/`xl:`.
- **`tw` vs `cn()`:** Use `tw` for static/breakpoint-only classes (e.g. `tw`max-w-full w-95 md:(w-206) lg:(max-w-326)`). Use `cn()` only when combining with conditionals (theme, props). Combine when needed: `cn(tw`base md:(...)`, condition && 'class')`. **Cascade:** Only specify a value at a breakpoint when it changes; values inherit from smaller breakpoints (e.g. gap-15 at md carries to lg—don't repeat it in lg).
- **Must-dos:** Preserve exact container count and nesting. Use `mx-auto` with `max-w-*`. Use `list-none` on `ul`/`li`. Pure Tailwind only (no inline styles). Prefer Server Component; extract client logic to minimal client component (e.g. `CarouselAnimator`). Imports: `cn`, `tw` from `@/lib/cn`; `cva` from `@/lib/cva`.
- **Tokens:** Colors/typography/spacing → `.cursor/rules/design-tokens.mdc`. No `-DEFAULT` suffix (e.g. `text-orange` not `text-orange-DEFAULT`).

## Tailwind v4 and conversion details

- **Config:** `app/globals.css` — `@import 'tailwindcss'`, `@theme { }` for tokens, `@utility` for custom gradients. No `tailwind.config.js` for theme.
- **Full conversion procedure, examples, and checklist:** `.cursor/rules/component-conversion-playbook.mdc` (follow in order).
- **Detailed examples (structure, VW conversion, ADA, SEO):** `.cursor/rules/tailwind-migration.mdc`.
- **Token lookup:** `.cursor/rules/design-tokens.mdc`.

## Validation

After making changes, remind user to run:

```bash
npm run checks
```

**IMPORTANT: Clear browser cache after conversions!**
Tailwind changes may not appear immediately due to caching. Tell the user to:

- Hard refresh (Cmd+Shift+R / Ctrl+Shift+R)
- Or open in incognito/private window
- Or clear browser cache

See detailed rules in:

- **`.cursor/rules/component-conversion-playbook.mdc`** – follow this for every conversion (single source of truth)
- **`components/LogoCube.js`** – reference example for structure and patterns
- `.cursor/rules/tailwind-migration.mdc` – detailed examples, ADA, SEO
- `.cursor/rules/design-tokens.mdc` – colors, typography, spacing
- `docs/COMPONENT_OPTIMIZATION.md`
